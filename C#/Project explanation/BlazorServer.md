# Blazor Server
> [!TIP]
> Blazor Server построен на основе Asp.NET Core Web приложении. <br>
> На основе ASP.NET Core строиться MVC, Razor Page, Web API, Blazor Server, Blazor web assembly<br>
>Что позволяет иметь в приложении любую из этих технологий или сразу несколько.
### В этой главе
- Базовая структура проекта
- Работа с изображениями в Html
- Dependency Injection


### Базовая структура проекта

| Файлы и папки    | Краткое описание                                                                                                                      |
|------------------|---------------------------------------------------------------------------------------------------------------------------------------|
| Dependencies     | Место для сторонних библиотек и зависимостий в  платформе .NET они называються NuGet packages                                         |
| Properties  |Основные настройки проекта, как запускать приложение, как его отлаживать, выбор режима Development or Production|
| wwwroot          | Хранить статические фалый CSS,  BootStrap  v4.3.1 https://getbootstrap.com, в будущем все изображения и ресурсы должны попадать сюда. |
| Areas            | Базовая логинка которая идёт прямо из коробки, в будущем возможно будем использовать для хранения API которая будет говрить с базой данных для логинки.|
| Data             |                                                                                                                                       |
| Pages            | Название говорит само за себя, тут живут куски или страници целиком.  |
| Shared           | Место для общих страниц или кусков страниц, логинка, боковое меню, в теории в будущем элементы которые могут быть использованы многократно, будут жить тут                                                                                                                                |
| Imports.razor    |                                                                                                                                       |
| App.razor        |                                                                                                                                       |
| appsettings.json |                                                                                                                                       |
| Program.cs       | Приложение начинает свою работу с этого файла, запуск консольного приложения.|
| Startup.cs       | Набор первоночальных настрек, которые по сути склеивают всё вмете, мы мало будем работать с этим фалом, в основном тут Microsoft все уже настроила|

### Работа с изображениями

Все статические файлы храняться в wwwroot, можно создать подкатегории папок внутри `wwwroot`, например Image, Icons, или все чего душа пожелает.<br>
К примеру нужно вставить изображения в какой либо учаток HTML, в IDE (Visual Studio ) открываем папку wwwroot находим нужное изображение и просто мышкой перетягиваем изображение в нужный участок кода Html.<br>
Будет создан тег автоматически `<img src="~/favicon.ico" />` все что необходимо это удалить `~/` чтоб получилось вот так `<img src="favicon.ico" />` все картинка вставлена.


### Dependency Injection
Первоначальная иньекция происходит в файле `Startup.cs` в методе `ConfigureSerives`
```csharp-interactive
Правилом хорошего тона являеться добавление зависмости через интерфейс и класса который его реализует, если мы через время решим поменять зависмость нужно просто заменить на другой класс который реализует тот же интрефейс.

 public void ConfigureServices(IServiceCollection services)
        {
            //Тут и происходит внедрение зависмостей
            services.AddRazorPages();
            services.AddServerSideBlazor();
            services.AddScoped<AuthenticationStateProvider, RevalidatingIdentityAuthenticationStateProvider<IdentityUser>>();

            //Вместо прямого вызова
            services.AddSingleton<WeatherForecastService>();

            //Вот так через интерфейс
            services.AddSingleton<IWeatherForecas, WeatherForecastService>();
        }
```
- `AddSingleton<>();` создает один екземляр класса для всего приложения пока приложение работает

- `AddScoped<>()` создает один екземляр для пользователя или для сесии, то есть при открытии страници в новой вкладке и обращении к этой зависимости, мы получим новый экземпляр класса. 

- `AddTransient<>()` каждый раз при обращении к зависимости возвращает **новый** екземпляр класса

 **`AddTransient()`** это самый популярный вид зависимости, так более безопасней.<br>
 **`AddScope()`** можно применить когда нужно немного производительности, когда класс очень масивный, можно немного сохранить ресурсов, но нужно быть увереным что правильно завершил сесию, чтоб данные не подмешивались там где этого недолжно происходить.<br>
**`AddSingleton()`** самый редкий вид зависимости, используеться очень в крайних случаях.


